<!doctype html><!doctype html>

<html lang="en"><html lang="en">

<head><head>

  <meta charset="utf-8" />  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>QR Code Generators - 100% Client-Side</title>  <title>vCard â†’ QR (100% Clientâ€‘Side)</title>

  <style>  <style>

    *{box-sizing:border-box}    *{box-sizing:border-box}

    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,Arial,sans-serif;margin:0;padding:24px;line-height:1.35;background:#0b0c10;color:#e8e8e8;overflow-x:hidden}    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,Arial,sans-serif;margin:0;padding:24px;line-height:1.35;background:#0b0c10;color:#e8e8e8;overflow-x:hidden}

    h1{font-size:28px;margin:0 0 8px}    h1{font-size:22px;margin:0 0 16px}

    h2{font-size:18px;margin:24px 0 12px;color:#9aa3b2;font-weight:500}    .wrap{display:grid;grid-template-columns:1.1fr .9fr;gap:24px}

    .subtitle{color:#9aa3b2;font-size:14px;margin:0 0 32px}    .card{background:#15171d;border:1px solid #252832;border-radius:14px;padding:16px}

    .container{max-width:800px;margin:0 auto}    label{display:block;font-size:12px;color:#9aa3b2;margin:10px 0 6px}

    .card-grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));gap:16px;margin-bottom:32px}    input,textarea,select{width:100%;padding:10px;border-radius:10px;border:1px solid #2a2f3a;background:#0f1116;color:#e8e8e8;font-size:16px;box-sizing:border-box;max-width:100%}

    .app-card{background:#15171d;border:1px solid #252832;border-radius:14px;padding:20px;text-decoration:none;color:#e8e8e8;display:block;transition:all 0.2s ease}    textarea{min-height:76px;resize:vertical}

    .app-card:hover{border-color:#3d7bf0;transform:translateY(-2px)}    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}

    .app-card h3{margin:0 0 8px;font-size:18px;color:#e8e8e8}    .btns{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}

    .app-card p{margin:0;font-size:14px;color:#9aa3b2;line-height:1.5}    button{background:#2d6cdf;border:1px solid #3d7bf0;color:#fff;padding:10px 14px;border-radius:10px;cursor:pointer;font-size:14px}

    .app-card .icon{font-size:32px;margin-bottom:12px;display:block}    button.secondary{background:#1b1e27;border-color:#2b2f3a;color:#e8e8e8}

    .muted{color:#9aa3b2;font-size:12px}    .toggle-btn{background:#1b1e27;border:1px solid #2b2f3a;color:#9aa3b2;padding:8px 12px;border-radius:8px;cursor:pointer;font-size:13px;margin-top:16px;width:100%}

    .feature-list{list-style:none;padding:0;margin:16px 0}    .extra-fields{display:none;margin-top:16px}

    .feature-list li{padding:8px 0;border-bottom:1px solid #252832;color:#9aa3b2;font-size:14px}    .extra-fields.show{display:block}

    .feature-list li:last-child{border-bottom:none}    .muted{color:#9aa3b2;font-size:12px}

    .feature-list li::before{content:"âœ“";color:#a6f5a6;margin-right:8px;font-weight:bold}    .qrbox{display:flex;align-items:center;justify-content:center;min-height:320px;background:#0f1116;border:1px dashed #303645;border-radius:14px}

    footer{margin-top:48px;padding-top:24px;border-top:1px solid #252832;text-align:center;color:#9aa3b2;font-size:12px}    .code{white-space:pre;overflow:auto;background:#0f1116;border:1px solid #2a2f3a;border-radius:10px;padding:10px;font-size:11px}

    footer a{color:#3d7bf0;text-decoration:none}    .ok{color:#a6f5a6} .warn{color:#ffd27e}

    footer a:hover{text-decoration:underline}    @media (max-width: 768px) {

    @media (max-width: 768px) {      body{padding:12px}

      body{padding:16px}      h1{font-size:20px}

      h1{font-size:24px}      .wrap{grid-template-columns:1fr;gap:16px}

      .card-grid{grid-template-columns:1fr}      .card{padding:12px}

    }      .qrbox{min-height:280px}

  </style>      .btns{gap:8px}

</head>      button{padding:12px 14px;width:100%}

<body>      .row{grid-template-columns:1fr;gap:8px}

  <div class="container">    }

    <h1>QR Code Generators</h1>  </style>

    <p class="subtitle">100% client-side tools for creating privacy-focused QR codes</p></head>

<body>

    <h2>Available Generators</h2>  <h1>vCard â†’ QR (100% Clientâ€‘Side)</h1>

    <div class="card-grid">  <p class="muted" style="margin:-8px 0 16px">QR code generation by <a href="https://davidshimjs.github.io/qrcodejs/" target="_blank" style="color:#3d7bf0">davidshimjs/qrcodejs</a></p>

      <a href="vcard.html" class="app-card">  <div class="wrap">

        <span class="icon">ðŸ‘¤</span>    <div class="card">

        <h3>Contact Card (vCard)</h3>      <label>Name</label>

        <p>Create a QR code with complete contact information. Scan to instantly add to phone contacts.</p>      <input id="name" placeholder="Evan Hoffman" />

      </a>      

      <label>Company / Organization</label>

      <a href="calendar.html" class="app-card">      <input id="org" placeholder="Acme Consulting" />

        <span class="icon">ðŸ“…</span>      

        <h3>Calendar Event</h3>      <label>Phone</label>

        <p>Generate a QR code for calendar events. Scan to add events directly to your calendar app.</p>      <input id="phone" placeholder="+1-555-765-4321" />

      </a>      

    </div>      <label>Email</label>

      <input id="email" placeholder="evan@example.com" />

    <h2>Why Use These Tools?</h2>      

    <ul class="feature-list">      <label style="display:flex;align-items:center;gap:6px">

      <li>100% client-side - your data never leaves your browser</li>        <input type="checkbox" id="useGravatar" style="width:auto;margin:0" />

      <li>No tracking, no analytics, no third-party services</li>        <span>Include Gravatar photo (from email)</span>

      <li>Works offline after initial page load</li>      </label>

      <li>Self-contained QR codes using standard formats (vCard 3.0, iCalendar)</li>

      <li>No account required, completely free</li>      <button class="toggle-btn" id="toggleExtra">â–¼ Show more fields</button>

      <li>Mobile-friendly responsive design</li>

      <li>Download QR codes as PNG or export raw data files</li>      <div class="extra-fields" id="extraFields">

    </ul>        <label>Title / Position</label>

        <input id="title" placeholder="Campaign Advisor" />

    <h2>How It Works</h2>        

    <div style="background:#15171d;border:1px solid #252832;border-radius:14px;padding:20px;margin-top:16px">        <label>Work phone</label>

      <p style="margin:0 0 12px;color:#e8e8e8">All processing happens in your browser:</p>        <input id="work" placeholder="+1-555-123-4567" />

      <ol style="margin:0;padding-left:20px;color:#9aa3b2;font-size:14px">        

        <li style="margin:8px 0">Fill out the form with your information</li>        <label>Website URL</label>

        <li style="margin:8px 0">Data is formatted using standard protocols (vCard, iCalendar, etc.)</li>        <input id="url" placeholder="https://example.com" />

        <li style="margin:8px 0">QR code is generated locally using JavaScript</li>        

        <li style="margin:8px 0">Download or scan - your data stays private</li>        <label>Address</label>

      </ol>        <div class="row">

    </div>          <input id="street" placeholder="123 Main St" />

          <input id="city" placeholder="Anytown" />

    <footer>        </div>

      <p>QR code generation by <a href="https://davidshimjs.github.io/qrcodejs/" target="_blank">davidshimjs/qrcodejs</a></p>        <div class="row">

      <p style="margin-top:8px">Open source â€¢ Privacy-focused â€¢ No data collection</p>          <input id="region" placeholder="NY" />

    </footer>          <input id="postal" placeholder="10101" />

  </div>        </div>

</body>        <input id="country" placeholder="USA" />

</html>        

        <label>Note</label>
        <textarea id="note" placeholder="Preferred contact time: evenings"></textarea>

        <div class="row">
          <div>
            <label>Error correction</label>
            <select id="ecl">
              <option value="M" selected>M (good balance)</option>
              <option value="L">L (max capacity)</option>
              <option value="Q">Q</option>
              <option value="H">H (most robust)</option>
            </select>
          </div>
          <div>
            <label>QR size (px)</label>
            <input id="size" type="number" min="128" max="2048" value="384" />
          </div>
        </div>
      </div>

      <div class="btns">
        <button id="gen">Generate QR</button>
        <button id="download" class="secondary">Download PNG</button>
        <button id="downloadVcf" class="secondary">Download VCF</button>
        <button id="copy" class="secondary">Copy vCard text</button>
      </div>
      <p class="muted" id="stats"></p>
    </div>

    <div class="card">
      <div class="qrbox"><div id="qrCanvas"></div></div>
      <label>Preview vCard payload</label>
      <pre class="code" id="preview"></pre>
    </div>
  </div>

  <!-- QR generation lib (pure client-side). For fully offline use, download this file and reference it locally. -->
  <script src="qrcode.min.js"></script>
  <script>
    const $ = (id) => document.getElementById(id);
    
    let debounceTimer;
    function debounceRender() {
      clearTimeout(debounceTimer);
      debounceTimer = setTimeout(renderQR, 100);
    }

    function esc(str){
      // vCard requires escaping \\ , ; , , and newlines within property values
      return String(str||"")
        .replace(/\\/g,'\\\\')
        .replace(/\n/g,'\\n')
        .replace(/;/g,'\\;')
        .replace(/,/g,'\\,');
    }
    
    function sanitize(str, allowedChars = '') {
      // Remove control characters and non-printable chars, but allow common punctuation
      // Allows: letters, numbers, spaces, apostrophes, hyphens, periods, and any additional chars
      const pattern = new RegExp(`[^\u0020-\u007E\u00A0-\u00FF${allowedChars}]`, 'g');
      return String(str || '')
        .replace(pattern, '') // Remove disallowed characters
        .replace(/[\x00-\x1F\x7F]/g, '') // Remove control characters
        .trim();
    }
    
    function sanitizeName(str) {
      // Allow letters, spaces, hyphens, apostrophes, periods
      return sanitize(str, '').replace(/[^a-zA-Z\s\-'.]/g, '');
    }
    
    function sanitizeText(str) {
      // For general text fields, allow more characters
      return sanitize(str, '@#$%&*()+=[]{}|:;"<>?/');
    }
    
    function sanitizeUrl(str) {
      // Basic URL validation/cleaning
      str = str.trim();
      if (!str) return '';
      // Remove any whitespace and control chars
      return str.replace(/[\s\x00-\x1F\x7F]/g, '');
    }
    
    function md5(str) {
      // Simple MD5 implementation for gravatar hash
      function md5cycle(x, k) {
        var a = x[0], b = x[1], c = x[2], d = x[3];
        a = ff(a, b, c, d, k[0], 7, -680876936);
        d = ff(d, a, b, c, k[1], 12, -389564586);
        c = ff(c, d, a, b, k[2], 17, 606105819);
        b = ff(b, c, d, a, k[3], 22, -1044525330);
        a = ff(a, b, c, d, k[4], 7, -176418897);
        d = ff(d, a, b, c, k[5], 12, 1200080426);
        c = ff(c, d, a, b, k[6], 17, -1473231341);
        b = ff(b, c, d, a, k[7], 22, -45705983);
        a = ff(a, b, c, d, k[8], 7, 1770035416);
        d = ff(d, a, b, c, k[9], 12, -1958414417);
        c = ff(c, d, a, b, k[10], 17, -42063);
        b = ff(b, c, d, a, k[11], 22, -1990404162);
        a = ff(a, b, c, d, k[12], 7, 1804603682);
        d = ff(d, a, b, c, k[13], 12, -40341101);
        c = ff(c, d, a, b, k[14], 17, -1502002290);
        b = ff(b, c, d, a, k[15], 22, 1236535329);
        a = gg(a, b, c, d, k[1], 5, -165796510);
        d = gg(d, a, b, c, k[6], 9, -1069501632);
        c = gg(c, d, a, b, k[11], 14, 643717713);
        b = gg(b, c, d, a, k[0], 20, -373897302);
        a = gg(a, b, c, d, k[5], 5, -701558691);
        d = gg(d, a, b, c, k[10], 9, 38016083);
        c = gg(c, d, a, b, k[15], 14, -660478335);
        b = gg(b, c, d, a, k[4], 20, -405537848);
        a = gg(a, b, c, d, k[9], 5, 568446438);
        d = gg(d, a, b, c, k[14], 9, -1019803690);
        c = gg(c, d, a, b, k[3], 14, -187363961);
        b = gg(b, c, d, a, k[8], 20, 1163531501);
        a = gg(a, b, c, d, k[13], 5, -1444681467);
        d = gg(d, a, b, c, k[2], 9, -51403784);
        c = gg(c, d, a, b, k[7], 14, 1735328473);
        b = gg(b, c, d, a, k[12], 20, -1926607734);
        a = hh(a, b, c, d, k[5], 4, -378558);
        d = hh(d, a, b, c, k[8], 11, -2022574463);
        c = hh(c, d, a, b, k[11], 16, 1839030562);
        b = hh(b, c, d, a, k[14], 23, -35309556);
        a = hh(a, b, c, d, k[1], 4, -1530992060);
        d = hh(d, a, b, c, k[4], 11, 1272893353);
        c = hh(c, d, a, b, k[7], 16, -155497632);
        b = hh(b, c, d, a, k[10], 23, -1094730640);
        a = hh(a, b, c, d, k[13], 4, 681279174);
        d = hh(d, a, b, c, k[0], 11, -358537222);
        c = hh(c, d, a, b, k[3], 16, -722521979);
        b = hh(b, c, d, a, k[6], 23, 76029189);
        a = hh(a, b, c, d, k[9], 4, -640364487);
        d = hh(d, a, b, c, k[12], 11, -421815835);
        c = hh(c, d, a, b, k[15], 16, 530742520);
        b = hh(b, c, d, a, k[2], 23, -995338651);
        a = ii(a, b, c, d, k[0], 6, -198630844);
        d = ii(d, a, b, c, k[7], 10, 1126891415);
        c = ii(c, d, a, b, k[14], 15, -1416354905);
        b = ii(b, c, d, a, k[5], 21, -57434055);
        a = ii(a, b, c, d, k[12], 6, 1700485571);
        d = ii(d, a, b, c, k[3], 10, -1894986606);
        c = ii(c, d, a, b, k[10], 15, -1051523);
        b = ii(b, c, d, a, k[1], 21, -2054922799);
        a = ii(a, b, c, d, k[8], 6, 1873313359);
        d = ii(d, a, b, c, k[15], 10, -30611744);
        c = ii(c, d, a, b, k[6], 15, -1560198380);
        b = ii(b, c, d, a, k[13], 21, 1309151649);
        a = ii(a, b, c, d, k[4], 6, -145523070);
        d = ii(d, a, b, c, k[11], 10, -1120210379);
        c = ii(c, d, a, b, k[2], 15, 718787259);
        b = ii(b, c, d, a, k[9], 21, -343485551);
        x[0] = add32(a, x[0]);
        x[1] = add32(b, x[1]);
        x[2] = add32(c, x[2]);
        x[3] = add32(d, x[3]);
      }
      function cmn(q, a, b, x, s, t) {
        a = add32(add32(a, q), add32(x, t));
        return add32((a << s) | (a >>> (32 - s)), b);
      }
      function ff(a, b, c, d, x, s, t) {
        return cmn((b & c) | ((~b) & d), a, b, x, s, t);
      }
      function gg(a, b, c, d, x, s, t) {
        return cmn((b & d) | (c & (~d)), a, b, x, s, t);
      }
      function hh(a, b, c, d, x, s, t) {
        return cmn(b ^ c ^ d, a, b, x, s, t);
      }
      function ii(a, b, c, d, x, s, t) {
        return cmn(c ^ (b | (~d)), a, b, x, s, t);
      }
      function md51(s) {
        var n = s.length,
          state = [1732584193, -271733879, -1732584194, 271733878], i;
        for (i = 64; i <= s.length; i += 64) {
          md5cycle(state, md5blk(s.substring(i - 64, i)));
        }
        s = s.substring(i - 64);
        var tail = [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0];
        for (i = 0; i < s.length; i++)
          tail[i>>2] |= s.charCodeAt(i) << ((i % 4) << 3);
        tail[i>>2] |= 0x80 << ((i % 4) << 3);
        if (i > 55) {
          md5cycle(state, tail);
          for (i = 0; i < 16; i++) tail[i] = 0;
        }
        tail[14] = n * 8;
        md5cycle(state, tail);
        return state;
      }
      function md5blk(s) {
        var md5blks = [], i;
        for (i = 0; i < 64; i += 4) {
          md5blks[i>>2] = s.charCodeAt(i)
            + (s.charCodeAt(i + 1) << 8)
            + (s.charCodeAt(i + 2) << 16)
            + (s.charCodeAt(i + 3) << 24);
        }
        return md5blks;
      }
      var hex_chr = '0123456789abcdef'.split('');
      function rhex(n) {
        var s = '', j = 0;
        for (; j < 4; j++)
          s += hex_chr[(n >> (j * 8 + 4)) & 0x0F]
            + hex_chr[(n >> (j * 8)) & 0x0F];
        return s;
      }
      function hex(x) {
        for (var i = 0; i < x.length; i++)
          x[i] = rhex(x[i]);
        return x.join('');
      }
      function add32(a, b) {
        return (a + b) & 0xFFFFFFFF;
      }
      return hex(md51(str.toLowerCase().trim()));
    }

    function makeVCard(){
      const fullName = sanitizeName($("name").value);
      
      // Infer first and last names from full name
      const nameParts = fullName.split(/\s+/).filter(Boolean);
      let nFirst = '', nLast = '';
      if (nameParts.length === 1) {
        nFirst = esc(nameParts[0]);
      } else if (nameParts.length >= 2) {
        nFirst = esc(nameParts[0]);
        nLast = esc(nameParts.slice(1).join(' '));
      }
      
      const org = esc(sanitizeText($("org").value));
      const title = esc(sanitizeText($("title").value));
      
      // Normalize phone numbers: keep + and digits, convert other chars to spaces, then collapse spaces
      const normalizePhone = (val) => {
        return val.replace(/[^\d+]/g, ' ').replace(/\s+/g, ' ').trim();
      };
      const phone = normalizePhone($("phone").value);
      const work = normalizePhone($("work").value);
      
      const email = $("email").value.trim().toLowerCase();
      const url = sanitizeUrl($("url").value);
      const street = esc(sanitizeText($("street").value));
      const city = esc(sanitizeText($("city").value));
      const region = esc(sanitizeText($("region").value));
      const postal = esc($("postal").value.replace(/[^a-zA-Z0-9\s-]/g, ''));
      const country = esc(sanitizeText($("country").value));
      const note = esc(sanitizeText($("note").value));

      // Build vCard 3.0 with CRLF line breaks (\r\n)
      const lines = [
        'BEGIN:VCARD',
        'VERSION:3.0',
        `N:${nLast};${nFirst};;;`,
        `FN:${esc(fullName)}`
      ];
      if(org) lines.push(`ORG:${org}`);
      if(title) lines.push(`TITLE:${title}`);
      if(phone) lines.push(`TEL;TYPE=CELL,VOICE:${phone}`);
      if(work) lines.push(`TEL;TYPE=WORK,VOICE:${work}`);
      if(email) lines.push(`EMAIL;TYPE=INTERNET:${email}`);
      
      // Add Gravatar photo URL if checkbox is checked and email exists
      if($("useGravatar").checked && email) {
        const emailHash = md5(email);
        const gravatarUrl = `https://www.gravatar.com/avatar/${emailHash}?s=200&d=404`;
        lines.push(`PHOTO;TYPE=JPEG;VALUE=URL:${gravatarUrl}`);
      }
      
      if(street || city || region || postal || country){
        // ADR: PO Box; Extended; Street; City; Region; Postal; Country
        lines.push(`ADR;TYPE=WORK:;;${street};${city};${region};${postal};${country}`);
      }
      if(url) lines.push(`URL:${url}`);
      if(note) lines.push(`NOTE:${note}`);
      lines.push('END:VCARD');

      const vcard = lines.join('\r\n');
      return vcard;
    }

    async function renderQR(){
      if (typeof QRCode === 'undefined') {
        console.error('QRCode library not loaded');
        $("preview").textContent = 'Error: QRCode library failed to load. Check your internet connection.';
        return;
      }
      
      const vcard = makeVCard();
      const size = Math.max(128, Math.min(parseInt($("size").value||"384",10), 2048));
      const ecl = $("ecl").value || 'M';
      
      // Clear previous QR code
      const qrbox = $("qrCanvas").parentElement;
      qrbox.innerHTML = '<div id="qrCanvas"></div>';
      
      // Generate QR code using davidshimjs/qrcodejs API
      new QRCode($("qrCanvas"), {
        text: vcard,
        width: size,
        height: size,
        colorDark: "#000000",
        colorLight: "#ffffff",
        correctLevel: QRCode.CorrectLevel[ecl]
      });

      // UI updates
      $("preview").textContent = vcard;
      const bytes = new TextEncoder().encode(vcard).length;
      const warn = bytes > 2500 ? 'warn' : 'ok';
      $("stats").innerHTML = `Payload size: <span class="${warn}">${bytes} bytes</span> Â· Tip: keep under ~2900 bytes for best compatibility.`;
    }

    $("gen").addEventListener('click', (e)=>{ e.preventDefault(); renderQR(); });

    $("download").addEventListener('click', (e)=>{
      e.preventDefault();
      const qrImg = $("qrCanvas").querySelector('img');
      if (!qrImg) {
        alert('Please generate a QR code first');
        return;
      }
      // Create filename from name field
      const name = $("name").value.trim() || 'Contact';
      const filename = name.replace(/\s+/g, '_').replace(/[^a-zA-Z0-9_-]/g, '') + '_qrcode.png';
      
      const link = document.createElement('a');
      link.download = filename;
      link.href = qrImg.src;
      link.click();
    });

    $("downloadVcf").addEventListener('click', (e)=>{
      e.preventDefault();
      const vcard = makeVCard();
      
      // Create filename from name field
      const name = $("name").value.trim() || 'Contact';
      const filename = name.replace(/\s+/g, '_').replace(/[^a-zA-Z0-9_-]/g, '') + '.vcf';
      
      // Create blob and download
      const blob = new Blob([vcard], { type: 'text/vcard;charset=utf-8' });
      const link = document.createElement('a');
      link.download = filename;
      link.href = URL.createObjectURL(blob);
      link.click();
      URL.revokeObjectURL(link.href);
    });

    $("copy").addEventListener('click', async (e)=>{
      e.preventDefault();
      const v = makeVCard();
      try{ await navigator.clipboard.writeText(v); alert('vCard copied to clipboard'); }
      catch(_){
        // Fallback
        const ta = document.createElement('textarea');
        ta.value = v; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
        alert('vCard copied to clipboard');
      }
    });
    
    // Toggle extra fields
    $("toggleExtra").addEventListener('click', (e) => {
      e.preventDefault();
      const extraFields = $("extraFields");
      const btn = $("toggleExtra");
      extraFields.classList.toggle('show');
      btn.textContent = extraFields.classList.contains('show') 
        ? 'â–² Hide extra fields' 
        : 'â–¼ Show more fields';
    });

    // Initial render after QRCode library is loaded
    if (document.readyState === 'loading') {
      window.addEventListener('DOMContentLoaded', () => {
        setTimeout(renderQR, 100);
      });
    } else {
      setTimeout(renderQR, 100);
    }
    
    // Add auto-regenerate on input change
    const inputs = ['name', 'org', 'phone', 'email', 'useGravatar', 'title', 'work', 'url', 'street', 'city', 'region', 'postal', 'country', 'note', 'ecl', 'size'];
    inputs.forEach(id => {
      const el = $(id);
      if (el) {
        el.addEventListener('input', debounceRender);
        el.addEventListener('change', debounceRender);
      }
    });
  </script>
</body>
</html>